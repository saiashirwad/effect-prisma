// This file was generated by effect-prisma, do not edit manually.

import type { PrismaClient } from "@prisma/client";
import { Effect } from "effect";

import { Prisma, createExec } from "effect-prisma/runtime";

import { createPostRepository, type PostRepository } from "./post.js";
import { createUserRepository, type UserRepository } from "./user.js";

export interface DBRepositories {
  post: PostRepository;
  user: UserRepository;
}

export function createDBRepositories(client: PrismaClient): DBRepositories {
  const exec = createExec(client);
  return {
    post: createPostRepository(exec),
    user: createUserRepository(exec),
  };
}

export class DB extends Effect.Service<DB>()("effect-prisma/DB", {
  effect: Effect.gen(function* () {
    const client = yield* Prisma;
    const exec = createExec(client);

    return {
      post: createPostRepository(exec),
      user: createUserRepository(exec),
    } as DBRepositories;
  }),
}) {}

export * from "./errors.js";
