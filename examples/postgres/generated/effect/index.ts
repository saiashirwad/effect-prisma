// This file was generated by effect-prisma, do not edit manually.

import type { PrismaClient } from "@prisma/client";
import { Effect } from "effect";

import { PrismaService, PrismaServiceLive, createExec } from "effect-prisma/runtime";

import { createCommentRepository, type CommentRepository } from "./comment.js";
import { createOrganizationRepository, type OrganizationRepository } from "./organization.js";
import { createOrganizationMemberRepository, type OrganizationMemberRepository } from "./organization_member.js";
import { createProjectRepository, type ProjectRepository } from "./project.js";
import { createTagRepository, type TagRepository } from "./tag.js";
import { createTaskRepository, type TaskRepository } from "./task.js";
import { createTeamRepository, type TeamRepository } from "./team.js";
import { createTeamMemberRepository, type TeamMemberRepository } from "./team_member.js";
import { createTimeEntryRepository, type TimeEntryRepository } from "./time_entry.js";
import { createUserRepository, type UserRepository } from "./user.js";

export interface DBRepositories {
  comment: CommentRepository;
  organization: OrganizationRepository;
  organizationMember: OrganizationMemberRepository;
  project: ProjectRepository;
  tag: TagRepository;
  task: TaskRepository;
  team: TeamRepository;
  teamMember: TeamMemberRepository;
  timeEntry: TimeEntryRepository;
  user: UserRepository;
}

export function createDBRepositories(client: PrismaClient): DBRepositories {
  const exec = createExec(client);
  return {
    comment: createCommentRepository(exec),
    organization: createOrganizationRepository(exec),
    organizationMember: createOrganizationMemberRepository(exec),
    project: createProjectRepository(exec),
    tag: createTagRepository(exec),
    task: createTaskRepository(exec),
    team: createTeamRepository(exec),
    teamMember: createTeamMemberRepository(exec),
    timeEntry: createTimeEntryRepository(exec),
    user: createUserRepository(exec),
  };
}

export class DB extends Effect.Service<DB>()("effect-prisma/DB", {
  effect: Effect.gen(function* () {
    const prismaService = yield* PrismaService;
    const exec = prismaService.exec;

    return {
      comment: createCommentRepository(exec),
      organization: createOrganizationRepository(exec),
      organizationMember: createOrganizationMemberRepository(exec),
      project: createProjectRepository(exec),
      tag: createTagRepository(exec),
      task: createTaskRepository(exec),
      team: createTeamRepository(exec),
      teamMember: createTeamMemberRepository(exec),
      timeEntry: createTimeEntryRepository(exec),
      user: createUserRepository(exec),
    } as DBRepositories;
  }),
  dependencies: [PrismaServiceLive],
}) {}

export * from "./errors.js";
